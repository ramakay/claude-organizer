%%{init: {'theme':'dark', 'sequence': { 'actorFontSize': '22px', 'messageFontSize': '20px' }}}%%
sequenceDiagram
    %% /enhance Command Sequence
    
    participant U as ðŸ‘¤ User
    participant CC as ðŸ“ Claude Code
    participant EC as ðŸ“„ ~/.claude/commands/enhance.md
    participant C as ðŸ¤– Claude
    participant MD as ðŸ“‹ CLAUDE.md
    
    U->>CC: /enhance fix broken tests
    CC->>EC: Load command definition
    EC->>C: Execute with $ARGUMENTS
    C->>C: Detect context: "testing"
    C->>MD: Read project rules
    MD->>C: Return relevant rules
    C->>C: Select: "NEVER claim success if tests failing"
    C->>U: Enhanced prompt with context-aware rules